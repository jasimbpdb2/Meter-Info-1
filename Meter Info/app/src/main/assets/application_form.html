<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶™‡¶§‡ßç‡¶∞</title>

    <style>
/* ===========================
   Optimized for One-Page PDF
   No change to screen display
   =========================== */

* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
    height: 100%;
    background: #f2f2f2;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #222;
}

/* SCREEN VIEW ‚Äî unchanged */
.application-container {
    width: 794px;
    max-width: calc(100% - 40px);
    margin: 36px auto;
    background: #ffffff;
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 3px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    padding: 40px 56px;
    line-height: 1.55;
    font-size: 16px;
}

/* Everything below here is ONLY for PDF/Print */
@page {
    size: A4;
    margin: 8mm !important;        /* üî• smaller margin to fit one page */
}

@media print {

    html, body {
        background: #ffffff !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* üî• Container compressed ONLY during print */
    .application-container {
        margin: 0 !important;
        padding: 6mm 8mm !important;  /* üî• smaller internal padding */
        width: auto !important;
        box-shadow: none !important;
        border: none !important;
        line-height: 1.25 !important;  /* üî• tighter spacing */
        font-size: 14px !important;    /* üî• reduce size slightly for PDF */
    }

    /* üî• Compress table spacing for print only */
    .form-table td {
        padding: 4px 6px !important;
    }

    .recharge-table th,
    .recharge-table td {
        padding: 4px 6px !important;
        font-size: 12px !important;
    }

    .notes li {
        margin: 2px 0 !important;
        line-height: 1.2 !important;
        font-size: 13px !important;
    }

    .signature {
        margin-top: 8px !important;
    }

    /* Remove UI parts */
    .search-section,
    .action-buttons,
    .debug-info {
        display: none !important;
    }
}
    </style>
</head>

<body>
<div class="application-container">

    <div class="search-section" id="searchSection">
        <h2 style="font-size:16px;margin-bottom:8px;">‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</h2>

        <div class="debug-info" id="debugInfo" style="display:none;">
            <strong>‡¶°‡¶ø‡¶¨‡¶æ‡¶ó ‡¶§‡¶•‡ßç‡¶Ø:</strong>
            <div id="debugLog"></div>
        </div>

        <div class="type-selector">
            <div class="type-btn active" id="prepaidBtn" onclick="selectType('prepaid')">‡¶™‡ßç‡¶∞‡¶ø‡¶™‡ßá‡¶á‡¶°</div>
            <div class="type-btn" id="postpaidBtn" onclick="selectType('postpaid')">‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶™‡ßá‡¶á‡¶°</div>
        </div>

        <div class="search-row">
            <input type="text" id="searchInput" class="search-input" placeholder="‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶®‡¶Ç ‡¶¨‡¶æ ‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï ‡¶®‡¶Ç ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                   autofocus autocapitalize="none" autocorrect="off" inputmode="numeric">
            <button onclick="fetchData()" id="searchBtn" class="search-btn">‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</button>
        </div>

        <div class="loading" id="loading">‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
        <div class="error" id="error"></div>
    </div>

    <div class="form-section" id="formSection" style="display:none;">

        <div class="header">
            <h1>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶™‡¶§‡ßç‡¶∞</h1>
            <p>‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶π‡ßÄ ‡¶™‡ßç‡¶∞‡¶ï‡ßå‡¶∂‡¶≤‡ßÄ<br>‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ì ‡¶¨‡¶ø‡¶§‡¶∞‡¶£ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó<br>‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡ßÅ‡ßé ‡¶â‡¶®‡ßç‡¶®‡¶Ø‡¶º‡¶® ‡¶¨‡ßã‡¶∞‡ßç‡¶°, ‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú‡•§</p>
        </div>

        <table class="form-table" role="presentation">
            <tr><td>‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶É</td><td id="customerName">-</td></tr>
            <tr><td>‡¶™‡¶ø‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶É</td><td id="fatherName">-</td></tr>
            <tr><td>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ‡¶É</td><td id="address">-</td></tr>
            <tr><td>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Ç‡¶É</td><td id="mobileNo">-</td></tr>
            <tr><td>‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶®‡¶Ç‡¶É</td><td id="meterNo">-</td></tr>
            <tr><td>‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï ‡¶®‡¶Ç‡¶É</td><td id="consumerNo">-</td></tr>
            <tr><td>‡¶¨‡¶ï‡ßá‡¶Ø‡¶º‡¶æ ‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶É</td><td id="arrear">‡¶ï‡ßã‡¶®‡¶ì ‡¶¨‡¶ï‡ßá‡¶Ø‡¶º‡¶æ ‡¶®‡ßá‡¶á</td></tr>
        </table>

        <div class="recharge-section">
            <h3 style="font-size:16px;margin-bottom:8px;">‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø (‡¶™‡ßç‡¶∞‡¶ø‡¶™‡ßá‡¶á‡¶°)</h3>
            <table class="recharge-table" id="rechargeTable" aria-describedby="Recharge Table">
                <thead>
                <tr><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th><th>‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th></tr>
                </thead>
                <tbody>
                <tr><td>-</td><td>-</td></tr>
                <tr><td>-</td><td>-</td></tr>
                <tr><td>-</td><td>-</td></tr>
                <tr><td>-</td><td>-</td></tr>
                </tbody>
            </table>
        </div>

        <section class="notes">
            <strong>‡¶∏‡¶Æ‡ßç‡¶≠‡¶æ‡¶¨‡ßç‡¶Ø ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó (‡¶Ø‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶§‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®):</strong>
            <ol>
                <li><input type="checkbox"> ‡¶≤‡ßã‡¶° ‡¶õ‡¶æ‡ßú‡¶æ‡¶ì ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶ï‡¶æ‡¶ü‡ßá / ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶ï‡¶æ‡¶ü‡ßá ‡¶®‡¶æ</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ü‡ßÅ‡¶á‡¶∏‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∏‡ßÄ‡¶≤ / ‡¶≤‡ßÄ‡¶° / ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶≤‡¶ï ‡¶∏‡ßÄ‡¶≤ ‡¶≠‡¶æ‡¶ô‡¶æ / ‡¶ö‡ßÅ‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶≠‡ßá‡¶ô‡ßá / ‡¶π‡¶æ‡¶∞‡¶ø‡ßü‡ßá / ‡¶™‡ßÅ‡ßú‡ßá ‡¶ó‡ßá‡¶õ‡ßá</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡¶æ‡¶®‡ßç‡¶§‡¶∞ / ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶ó‡ßç‡¶∞‡¶π‡ßÄ</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá‡¶§‡ßá ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü ‡¶è‡¶≤‡ßã‡¶Æ‡ßá‡¶≤‡ßã</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶ü‡¶ø / ‡¶™‡¶ø‡¶ü‡¶ø ‡¶®‡¶∑‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶π‡¶æ‡¶∞‡¶ø‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡ßá ‡¶®‡¶æ</li>
                <li><input type="checkbox"> ‡¶ü‡¶æ‡¶∞‡ßç‡¶Æ‡¶ø‡¶®‡¶æ‡¶≤ ‡¶ï‡¶≠‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶≤‡ßá ‡¶´‡ßá‡¶≤‡ßá‡¶õ‡¶ø / ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßá‡¶â ‡¶ñ‡ßÅ‡¶≤‡ßá‡¶õ‡ßá</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü ‡¶®‡ßá‡¶á</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ / ‡¶∏‡¶Æ‡ßü ‡¶†‡¶ø‡¶ï ‡¶®‡ßá‡¶á</li>
                <li><input type="checkbox"> ‡¶®‡¶æ‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®</li>
                <li><input type="checkbox"> ‡¶≤‡ßã‡¶° ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®</li>
                <li><input type="checkbox"> ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡¶ø ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ / ‡¶≤‡ßã-‡¶≠‡ßã‡¶≤‡ßç‡¶ü‡ßá‡¶ú ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ</li>
                <li><input type="checkbox"> ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</li>
                <li><input type="checkbox"> ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø .....................................................................................</li>
            </ol>
        </section>

        <div class="signature">
            <div class="sig-line">‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ï‡ßç‡¶∑‡¶∞</div>
        </div>

        <div class="action-buttons">
            <button class="btn" onclick="window.print()">üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü</button>
            <button class="btn" onclick="saveAsPDF()">üìÑ PDF ‡¶∏‡ßá‡¶≠</button>
            <button class="btn" onclick="showSearchSection()">‚Üê ‡¶®‡¶§‡ßÅ‡¶® ‡¶ñ‡ßã‡¶Å‡¶ú</button>
            <button class="btn" onclick="closeForm()">‚úï ‡¶¨‡¶®‡ßç‡¶ß</button>
        </div>

    </div>
</div>

<script>
// Add PDF save function (keeps original logic)
function saveAsPDF() {
    if (window.AndroidInterface && AndroidInterface.saveAsPDF) {
        AndroidInterface.saveAsPDF();
    } else {
        // Fallback to print on mobile
        alert('PDF ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶Ö‡¶™‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®');
        window.print();
    }
}

/* ------- EXISTING JS LOGIC (kept identical) ------- */
let selectedType = 'prepaid';

function debugLog(msg){
    const d=document.getElementById("debugLog");
    if(d){ d.innerHTML+=msg+"<br>"; d.scrollTop=d.scrollHeight; }
}

function selectType(t){
    selectedType=t;
    document.getElementById("prepaidBtn").classList.toggle("active",t==="prepaid");
    document.getElementById("postpaidBtn").classList.toggle("active",t==="postpaid");
}

function fetchData(){
    const input=document.getElementById("searchInput").value.trim();
    if(!input){ showError("‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶®‡¶Ç ‡¶¨‡¶æ ‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï ‡¶®‡¶Ç ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!"); return; }

    showLoading();

    if(window.AndroidInterface){
        try{
            const result=AndroidInterface.fetchDataForApplication(input,selectedType);
            const data=JSON.parse(result);
            fillFormWithData(data);
        }catch(err){ showError("App error: "+err); }
    } else {
        showError("AndroidInterface not available");
    }
}

function fillFormWithData(data){
    hideLoading();
    if(data.error){ showError(data.error); return; }

    document.getElementById("customerName").textContent=data.customer_name||"-";
    document.getElementById("fatherName").textContent=data.father_name||"-";
    document.getElementById("address").textContent=data.address||"-";
    document.getElementById("mobileNo").textContent=data.mobile_no||"-";
    document.getElementById("meterNo").textContent=data.meter_no||"-";
    document.getElementById("consumerNo").textContent=data.consumer_no||"-";

    document.getElementById("arrear").textContent =
        (data.arrear && data.arrear!=="0") ? data.arrear : "‡¶ï‡ßã‡¶®‡¶ì ‡¶¨‡¶ï‡ßá‡¶Ø‡¶º‡¶æ ‡¶®‡ßá‡¶á";

    const tbody=document.getElementById("rechargeTable").querySelector("tbody");
    tbody.innerHTML="";

    let rechargeData = data.recharges || [];
    let count = 0;

    rechargeData.slice(0, 4).forEach(r=>{
        tbody.innerHTML+=`<tr><td>${r.Date||"-"}</td><td>${r.Amount||"-"}</td></tr>`;
        count++;
    });

    for (let i = count; i < 4; i++) {
        tbody.innerHTML += `<tr><td>-</td><td>-</td></tr>`;
    }

    document.getElementById("searchSection").style.display="none";
    document.getElementById("formSection").style.display="block";
}

function showLoading(){
    document.getElementById("loading").style.display="block";
    document.getElementById("searchBtn").disabled=true;
    document.getElementById("searchBtn").textContent="‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶õ‡¶ø...";
}

function hideLoading(){
    document.getElementById("loading").style.display="none";
    document.getElementById("searchBtn").disabled=false;
    document.getElementById("searchBtn").textContent="‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®";
}

function showError(m){
    const err = document.getElementById("error");
    if(err){ err.textContent=m; err.style.display="block"; }
    hideLoading();
}

function hideError(){ const e=document.getElementById("error"); if(e) e.style.display="none"; }

function showSearchSection(){
    document.getElementById("formSection").style.display="none";
    document.getElementById("searchSection").style.display="block";
}

function closeForm(){
    if(window.AndroidInterface){ AndroidInterface.closeApplication(); }
}

document.addEventListener('DOMContentLoaded', () => {
    selectType(selectedType);
});
</script>
</body>
</html>